(()=>{var e={};e.id=644,e.ids=[644],e.modules={525:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(687),a=s(3210),i=s(6189),n=s(605);function o({onSuccess:e,onCancel:t}){let s=(0,i.useRouter)(),[n,o]=(0,a.useState)(!1),[l,d]=(0,a.useState)(null),[c,m]=(0,a.useState)({title:"",description:"",objectives:[],start_date:"",end_date:"",budget:"",rules:{min_followers:1e3,required_platforms:["instagram"],content_requirements:"",hashtags:[]},requirements:{content_type:"post",min_posts:1,use_coupon:!0}}),[u,p]=(0,a.useState)(""),[x,h]=(0,a.useState)(""),g=e=>{let{name:t,value:s}=e.target;if(t.includes(".")){let[e,r]=t.split("."),a=c[e];a&&"object"==typeof a&&m({...c,[e]:{...a,[r]:s}})}else m({...c,[t]:s})},b=e=>{let{name:t,value:s}=e.target;if(t.includes(".")){let[e,r]=t.split("."),a=c[e];a&&"object"==typeof a&&m({...c,[e]:{...a,[r]:""===s?"":parseInt(s)}})}else m({...c,[t]:""===s?"":parseFloat(s)})},f=e=>{let t=c.rules.required_platforms;t.includes(e)?m({...c,rules:{...c.rules,required_platforms:t.filter(t=>t!==e)}}):m({...c,rules:{...c.rules,required_platforms:[...t,e]}})},j=e=>{m({...c,objectives:c.objectives.filter((t,s)=>s!==e)})},v=e=>{m({...c,rules:{...c.rules,hashtags:c.rules.hashtags.filter((t,s)=>s!==e)}})},y=async t=>{t.preventDefault();try{if(o(!0),d(null),!c.title||!c.description||!c.start_date||!c.end_date){d("Por favor, preencha todos os campos obrigat\xf3rios.");return}let t=new Date(c.start_date),r=new Date(c.end_date);if(t>=r){d("A data de in\xedcio deve ser anterior \xe0 data de t\xe9rmino.");return}let a={...c,start_date:t.toISOString(),end_date:r.toISOString(),status:"draft",rules:JSON.stringify(c.rules),requirements:JSON.stringify(c.requirements)},i=await fetch("/api/campaigns",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),n=await i.json();if(!i.ok)throw Error(n.error||"Erro ao criar campanha");e?e(n.campaign):s.push(`/dashboard/campaigns/${n.campaign.id}`)}catch(e){d(e.message||"Ocorreu um erro ao criar a campanha. Por favor, tente novamente.")}finally{o(!1)}};return(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Nova Campanha"}),l&&(0,r.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6",children:(0,r.jsx)("div",{className:"flex",children:(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("p",{className:"text-sm text-red-700",children:l})})})}),(0,r.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium border-b pb-2",children:"Informa\xe7\xf5es B\xe1sicas"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"T\xedtulo da Campanha *"}),(0,r.jsx)("input",{type:"text",id:"title",name:"title",value:c.title,onChange:g,className:"input-field mt-1",placeholder:"Ex: Campanha de Ver\xe3o 2025",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Descri\xe7\xe3o *"}),(0,r.jsx)("textarea",{id:"description",name:"description",rows:4,value:c.description,onChange:g,className:"input-field mt-1",placeholder:"Descreva sua campanha em detalhes...",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"start_date",className:"block text-sm font-medium text-gray-700",children:"Data de In\xedcio *"}),(0,r.jsx)("input",{type:"date",id:"start_date",name:"start_date",value:c.start_date,onChange:g,className:"input-field mt-1",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"end_date",className:"block text-sm font-medium text-gray-700",children:"Data de T\xe9rmino *"}),(0,r.jsx)("input",{type:"date",id:"end_date",name:"end_date",value:c.end_date,onChange:g,className:"input-field mt-1",required:!0})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"budget",className:"block text-sm font-medium text-gray-700",children:"Or\xe7amento (R$)"}),(0,r.jsx)("input",{type:"number",id:"budget",name:"budget",value:c.budget,onChange:b,className:"input-field mt-1",placeholder:"Ex: 1000",min:"0",step:"0.01"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium border-b pb-2",children:"Objetivos"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"text",value:u,onChange:e=>p(e.target.value),className:"input-field flex-grow",placeholder:"Adicione um objetivo..."}),(0,r.jsx)("button",{type:"button",onClick:()=>{""!==u.trim()&&(m({...c,objectives:[...c.objectives,u.trim()]}),p(""))},className:"bg-primary text-white px-4 py-2 rounded hover:bg-primary-dark",children:"Adicionar"})]}),(0,r.jsx)("div",{className:"space-y-2",children:0===c.objectives.length?(0,r.jsx)("p",{className:"text-sm text-gray-500 italic",children:"Nenhum objetivo adicionado"}):(0,r.jsx)("ul",{className:"space-y-2",children:c.objectives.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[(0,r.jsx)("span",{children:e}),(0,r.jsx)("button",{type:"button",onClick:()=>j(t),className:"text-red-500 hover:text-red-700",children:"Remover"})]},t))})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium border-b pb-2",children:"Regras e Requisitos"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"rules.min_followers",className:"block text-sm font-medium text-gray-700",children:"M\xednimo de Seguidores"}),(0,r.jsx)("input",{type:"number",id:"rules.min_followers",name:"rules.min_followers",value:c.rules.min_followers,onChange:b,className:"input-field mt-1",placeholder:"Ex: 1000",min:"0"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plataformas Requeridas"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-4",children:["instagram","tiktok","youtube","twitter"].map(e=>(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",id:`platform-${e}`,checked:c.rules.required_platforms.includes(e),onChange:()=>f(e),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),(0,r.jsx)("label",{htmlFor:`platform-${e}`,className:"ml-2 text-sm text-gray-700 capitalize",children:e})]},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"rules.content_requirements",className:"block text-sm font-medium text-gray-700",children:"Requisitos de Conte\xfado"}),(0,r.jsx)("textarea",{id:"rules.content_requirements",name:"rules.content_requirements",rows:3,value:c.rules.content_requirements,onChange:g,className:"input-field mt-1",placeholder:"Descreva os requisitos para o conte\xfado..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hashtags"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"text",value:x,onChange:e=>h(e.target.value),className:"input-field flex-grow",placeholder:"Adicione uma hashtag..."}),(0,r.jsx)("button",{type:"button",onClick:()=>{""!==x.trim()&&(m({...c,rules:{...c.rules,hashtags:[...c.rules.hashtags,x.trim()]}}),h(""))},className:"bg-primary text-white px-4 py-2 rounded hover:bg-primary-dark",children:"Adicionar"})]}),(0,r.jsx)("div",{className:"mt-2 space-y-2",children:0===c.rules.hashtags.length?(0,r.jsx)("p",{className:"text-sm text-gray-500 italic",children:"Nenhuma hashtag adicionada"}):(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:c.rules.hashtags.map((e,t)=>(0,r.jsxs)("div",{className:"bg-gray-100 px-3 py-1 rounded-full flex items-center",children:[(0,r.jsxs)("span",{className:"text-sm",children:["#",e]}),(0,r.jsx)("button",{type:"button",onClick:()=>v(t),className:"ml-2 text-gray-500 hover:text-red-500",children:"\xd7"})]},t))})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"requirements.content_type",className:"block text-sm font-medium text-gray-700",children:"Tipo de Conte\xfado"}),(0,r.jsxs)("select",{id:"requirements.content_type",name:"requirements.content_type",value:c.requirements.content_type,onChange:g,className:"input-field mt-1",children:[(0,r.jsx)("option",{value:"post",children:"Post"}),(0,r.jsx)("option",{value:"story",children:"Story"}),(0,r.jsx)("option",{value:"reels",children:"Reels/TikTok"}),(0,r.jsx)("option",{value:"video",children:"V\xeddeo"}),(0,r.jsx)("option",{value:"any",children:"Qualquer"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"requirements.min_posts",className:"block text-sm font-medium text-gray-700",children:"M\xednimo de Publica\xe7\xf5es"}),(0,r.jsx)("input",{type:"number",id:"requirements.min_posts",name:"requirements.min_posts",value:c.requirements.min_posts,onChange:b,className:"input-field mt-1",placeholder:"Ex: 1",min:"1"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",id:"requirements.use_coupon",name:"requirements.use_coupon",checked:c.requirements.use_coupon,onChange:e=>{let{name:t,checked:s}=e.target;if(t.includes(".")){let[e,r]=t.split("."),a=c[e];a&&"object"==typeof a&&m({...c,[e]:{...a,[r]:s}})}else m({...c,[t]:s})},className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),(0,r.jsx)("label",{htmlFor:"requirements.use_coupon",className:"ml-2 text-sm text-gray-700",children:"Utilizar cupons de desconto"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[(0,r.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"Cancelar"}),(0,r.jsx)("button",{type:"submit",disabled:n,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:n?"Criando...":"Criar Campanha"})]})]})]})}function l(){let e=(0,i.useRouter)(),{user:t}=(0,n._)();return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"md:flex md:items-center md:justify-between mb-8",children:(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate",children:"Nova Campanha"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Crie uma nova campanha para conectar-se com influenciadores"})]})}),(0,r.jsx)(o,{onSuccess:t=>{e.push(`/dashboard/campaigns/${t.id}`)},onCancel:()=>{e.push("/dashboard/campaigns")}})]})}},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1630:e=>{"use strict";e.exports=require("http")},1645:e=>{"use strict";e.exports=require("net")},1997:e=>{"use strict";e.exports=require("punycode")},2074:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/luizgustavovincenzi/ai-projects/CriaCore/criacore-1/src/app/dashboard/campaigns/new/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/luizgustavovincenzi/ai-projects/CriaCore/criacore-1/src/app/dashboard/campaigns/new/page.tsx","default")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4075:e=>{"use strict";e.exports=require("zlib")},4631:e=>{"use strict";e.exports=require("tls")},4673:(e,t,s)=>{Promise.resolve().then(s.bind(s,2074))},4735:e=>{"use strict";e.exports=require("events")},5511:e=>{"use strict";e.exports=require("crypto")},5591:e=>{"use strict";e.exports=require("https")},5666:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=s(5239),a=s(8088),i=s(8170),n=s.n(i),o=s(893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d={children:["",{children:["dashboard",{children:["campaigns",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2074)),"/Users/luizgustavovincenzi/ai-projects/CriaCore/criacore-1/src/app/dashboard/campaigns/new/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3144)),"/Users/luizgustavovincenzi/ai-projects/CriaCore/criacore-1/src/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,4431)),"/Users/luizgustavovincenzi/ai-projects/CriaCore/criacore-1/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,4413)),"/Users/luizgustavovincenzi/ai-projects/CriaCore/criacore-1/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/Users/luizgustavovincenzi/ai-projects/CriaCore/criacore-1/src/app/dashboard/campaigns/new/page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/dashboard/campaigns/new/page",pathname:"/dashboard/campaigns/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7473:(e,t,s)=>{Promise.resolve().then(s.bind(s,525))},7910:e=>{"use strict";e.exports=require("stream")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9428:e=>{"use strict";e.exports=require("buffer")},9551:e=>{"use strict";e.exports=require("url")}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[524,515,191],()=>s(5666));module.exports=r})();