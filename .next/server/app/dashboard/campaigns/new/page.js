(()=>{var e={};e.id=679,e.ids=[679],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},9291:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>c});var r=s(482),a=s(9108),i=s(2563),n=s.n(i),l=s(8300),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["dashboard",{children:["campaigns",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8697)),"/Users/luizgustavovincenzi/ai-projects/CriaCore/criacore/src/app/dashboard/campaigns/new/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,4699)),"/Users/luizgustavovincenzi/ai-projects/CriaCore/criacore/src/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2137)),"/Users/luizgustavovincenzi/ai-projects/CriaCore/criacore/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,8206)),"/Users/luizgustavovincenzi/ai-projects/CriaCore/criacore/src/app/not-found.tsx"]}],d=["/Users/luizgustavovincenzi/ai-projects/CriaCore/criacore/src/app/dashboard/campaigns/new/page.tsx"],m="/dashboard/campaigns/new/page",u={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/campaigns/new/page",pathname:"/dashboard/campaigns/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7908:(e,t,s)=>{Promise.resolve().then(s.bind(s,662))},662:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(2295),a=s(3729),i=s(2254),n=s(6257);function l({onSuccess:e,onCancel:t}){let s=(0,i.useRouter)(),[n,l]=(0,a.useState)(!1),[o,c]=(0,a.useState)(null),[d,m]=(0,a.useState)({title:"",description:"",objectives:[],start_date:"",end_date:"",budget:"",rules:{min_followers:1e3,required_platforms:["instagram"],content_requirements:"",hashtags:[]},requirements:{content_type:"post",min_posts:1,use_coupon:!0}}),[u,p]=(0,a.useState)(""),[x,h]=(0,a.useState)(""),g=e=>{let{name:t,value:s}=e.target;if(t.includes(".")){let[e,r]=t.split("."),a=d[e];a&&"object"==typeof a&&m({...d,[e]:{...a,[r]:s}})}else m({...d,[t]:s})},b=e=>{let{name:t,value:s}=e.target;if(t.includes(".")){let[e,r]=t.split("."),a=d[e];a&&"object"==typeof a&&m({...d,[e]:{...a,[r]:""===s?"":parseInt(s)}})}else m({...d,[t]:""===s?"":parseFloat(s)})},f=e=>{let t=d.rules.required_platforms;t.includes(e)?m({...d,rules:{...d.rules,required_platforms:t.filter(t=>t!==e)}}):m({...d,rules:{...d.rules,required_platforms:[...t,e]}})},j=e=>{m({...d,objectives:d.objectives.filter((t,s)=>s!==e)})},y=e=>{m({...d,rules:{...d.rules,hashtags:d.rules.hashtags.filter((t,s)=>s!==e)}})},v=async t=>{t.preventDefault();try{if(l(!0),c(null),!d.title||!d.description||!d.start_date||!d.end_date){c("Por favor, preencha todos os campos obrigat\xf3rios.");return}let t=new Date(d.start_date),r=new Date(d.end_date);if(t>=r){c("A data de in\xedcio deve ser anterior \xe0 data de t\xe9rmino.");return}let a={...d,start_date:t.toISOString(),end_date:r.toISOString(),status:"draft",rules:JSON.stringify(d.rules),requirements:JSON.stringify(d.requirements)},i=await fetch("/api/campaigns",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),n=await i.json();if(!i.ok)throw Error(n.error||"Erro ao criar campanha");e?e(n.campaign):s.push(`/dashboard/campaigns/${n.campaign.id}`)}catch(e){c(e.message||"Ocorreu um erro ao criar a campanha. Por favor, tente novamente.")}finally{l(!1)}};return(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[r.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Nova Campanha"}),o&&r.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6",children:r.jsx("div",{className:"flex",children:r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:"text-sm text-red-700",children:o})})})}),(0,r.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium border-b pb-2",children:"Informa\xe7\xf5es B\xe1sicas"}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"T\xedtulo da Campanha *"}),r.jsx("input",{type:"text",id:"title",name:"title",value:d.title,onChange:g,className:"input-field mt-1",placeholder:"Ex: Campanha de Ver\xe3o 2025",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Descri\xe7\xe3o *"}),r.jsx("textarea",{id:"description",name:"description",rows:4,value:d.description,onChange:g,className:"input-field mt-1",placeholder:"Descreva sua campanha em detalhes...",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"start_date",className:"block text-sm font-medium text-gray-700",children:"Data de In\xedcio *"}),r.jsx("input",{type:"date",id:"start_date",name:"start_date",value:d.start_date,onChange:g,className:"input-field mt-1",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"end_date",className:"block text-sm font-medium text-gray-700",children:"Data de T\xe9rmino *"}),r.jsx("input",{type:"date",id:"end_date",name:"end_date",value:d.end_date,onChange:g,className:"input-field mt-1",required:!0})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"budget",className:"block text-sm font-medium text-gray-700",children:"Or\xe7amento (R$)"}),r.jsx("input",{type:"number",id:"budget",name:"budget",value:d.budget,onChange:b,className:"input-field mt-1",placeholder:"Ex: 1000",min:"0",step:"0.01"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium border-b pb-2",children:"Objetivos"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"text",value:u,onChange:e=>p(e.target.value),className:"input-field flex-grow",placeholder:"Adicione um objetivo..."}),r.jsx("button",{type:"button",onClick:()=>{""!==u.trim()&&(m({...d,objectives:[...d.objectives,u.trim()]}),p(""))},className:"bg-primary text-white px-4 py-2 rounded hover:bg-primary-dark",children:"Adicionar"})]}),r.jsx("div",{className:"space-y-2",children:0===d.objectives.length?r.jsx("p",{className:"text-sm text-gray-500 italic",children:"Nenhum objetivo adicionado"}):r.jsx("ul",{className:"space-y-2",children:d.objectives.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[r.jsx("span",{children:e}),r.jsx("button",{type:"button",onClick:()=>j(t),className:"text-red-500 hover:text-red-700",children:"Remover"})]},t))})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium border-b pb-2",children:"Regras e Requisitos"}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"rules.min_followers",className:"block text-sm font-medium text-gray-700",children:"M\xednimo de Seguidores"}),r.jsx("input",{type:"number",id:"rules.min_followers",name:"rules.min_followers",value:d.rules.min_followers,onChange:b,className:"input-field mt-1",placeholder:"Ex: 1000",min:"0"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plataformas Requeridas"}),r.jsx("div",{className:"flex flex-wrap gap-4",children:["instagram","tiktok","youtube","twitter"].map(e=>(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:`platform-${e}`,checked:d.rules.required_platforms.includes(e),onChange:()=>f(e),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),r.jsx("label",{htmlFor:`platform-${e}`,className:"ml-2 text-sm text-gray-700 capitalize",children:e})]},e))})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"rules.content_requirements",className:"block text-sm font-medium text-gray-700",children:"Requisitos de Conte\xfado"}),r.jsx("textarea",{id:"rules.content_requirements",name:"rules.content_requirements",rows:3,value:d.rules.content_requirements,onChange:g,className:"input-field mt-1",placeholder:"Descreva os requisitos para o conte\xfado..."})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hashtags"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"text",value:x,onChange:e=>h(e.target.value),className:"input-field flex-grow",placeholder:"Adicione uma hashtag..."}),r.jsx("button",{type:"button",onClick:()=>{""!==x.trim()&&(m({...d,rules:{...d.rules,hashtags:[...d.rules.hashtags,x.trim()]}}),h(""))},className:"bg-primary text-white px-4 py-2 rounded hover:bg-primary-dark",children:"Adicionar"})]}),r.jsx("div",{className:"mt-2 space-y-2",children:0===d.rules.hashtags.length?r.jsx("p",{className:"text-sm text-gray-500 italic",children:"Nenhuma hashtag adicionada"}):r.jsx("div",{className:"flex flex-wrap gap-2",children:d.rules.hashtags.map((e,t)=>(0,r.jsxs)("div",{className:"bg-gray-100 px-3 py-1 rounded-full flex items-center",children:[(0,r.jsxs)("span",{className:"text-sm",children:["#",e]}),r.jsx("button",{type:"button",onClick:()=>y(t),className:"ml-2 text-gray-500 hover:text-red-500",children:"\xd7"})]},t))})})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"requirements.content_type",className:"block text-sm font-medium text-gray-700",children:"Tipo de Conte\xfado"}),(0,r.jsxs)("select",{id:"requirements.content_type",name:"requirements.content_type",value:d.requirements.content_type,onChange:g,className:"input-field mt-1",children:[r.jsx("option",{value:"post",children:"Post"}),r.jsx("option",{value:"story",children:"Story"}),r.jsx("option",{value:"reels",children:"Reels/TikTok"}),r.jsx("option",{value:"video",children:"V\xeddeo"}),r.jsx("option",{value:"any",children:"Qualquer"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"requirements.min_posts",className:"block text-sm font-medium text-gray-700",children:"M\xednimo de Publica\xe7\xf5es"}),r.jsx("input",{type:"number",id:"requirements.min_posts",name:"requirements.min_posts",value:d.requirements.min_posts,onChange:b,className:"input-field mt-1",placeholder:"Ex: 1",min:"1"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"requirements.use_coupon",name:"requirements.use_coupon",checked:d.requirements.use_coupon,onChange:e=>{let{name:t,checked:s}=e.target;if(t.includes(".")){let[e,r]=t.split("."),a=d[e];a&&"object"==typeof a&&m({...d,[e]:{...a,[r]:s}})}else m({...d,[t]:s})},className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),r.jsx("label",{htmlFor:"requirements.use_coupon",className:"ml-2 text-sm text-gray-700",children:"Utilizar cupons de desconto"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"Cancelar"}),r.jsx("button",{type:"submit",disabled:n,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:n?"Criando...":"Criar Campanha"})]})]})]})}function o(){let e=(0,i.useRouter)(),{user:t}=(0,n.useSupabase)();return(0,a.useEffect)(()=>{if(!t){e.push("/auth/login");return}(async()=>{try{let s=t.user_metadata?.user_type;"brand"!==s&&e.push("/dashboard")}catch(t){console.error("Error checking user type:",t),e.push("/dashboard")}})()},[t,e]),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"md:flex md:items-center md:justify-between mb-8",children:(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate",children:"Nova Campanha"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Crie uma nova campanha para conectar-se com influenciadores"})]})}),r.jsx(l,{onSuccess:t=>{e.push(`/dashboard/campaigns/${t.id}`)},onCancel:()=>{e.push("/dashboard/campaigns")}})]})}},8697:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>n});let r=(0,s(6843).createProxy)(String.raw`/Users/luizgustavovincenzi/ai-projects/CriaCore/criacore/src/app/dashboard/campaigns/new/page.tsx`),{__esModule:a,$$typeof:i}=r,n=r.default}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[225,248,146],()=>s(9291));module.exports=r})();