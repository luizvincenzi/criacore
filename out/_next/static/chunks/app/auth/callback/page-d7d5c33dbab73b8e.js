(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[453],{3332:function(e,r,t){Promise.resolve().then(t.bind(t,4798))},4798:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return i}});var a=t(7437),n=t(2265),o=t(4033),s=t(1097);function i(){let e=(0,o.useRouter)();return(0,n.useEffect)(()=>{(async()=>{let{searchParams:r}=new URL(window.location.href),t=r.get("code"),a=r.get("user_type");if(t)try{let{data:r,error:i}=await s.O.auth.exchangeCodeForSession(t);if(i){console.error("Error exchanging code for session:",i),e.push("/auth/login?error=auth_callback_error");return}if(r.user&&r.user.app_metadata.provider&&!r.user.app_metadata.profile_created){var n,o;let t=a||"creator";if("brand"===t){let{error:e}=await s.O.from("brands").insert([{id:r.user.id,name:r.user.user_metadata.full_name||(null===(n=r.user.email)||void 0===n?void 0:n.split("@")[0]),email:r.user.email}]);e&&console.error("Error creating brand profile:",e)}else{let{error:e}=await s.O.from("creators").insert([{id:r.user.id,name:r.user.user_metadata.full_name||(null===(o=r.user.email)||void 0===o?void 0:o.split("@")[0]),email:r.user.email}]);e&&console.error("Error creating creator profile:",e)}await s.O.auth.updateUser({data:{profile_created:!0,user_type:t}}),e.push("/auth/onboarding?type=".concat(t))}else e.push("/dashboard")}catch(r){console.error("Unexpected error during auth callback:",r),e.push("/auth/login?error=unexpected_error")}else e.push("/auth/login?error=no_code_error")})()},[e]),(0,a.jsx)("div",{className:"min-h-screen bg-background flex flex-col justify-center items-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Processando seu login..."}),(0,a.jsx)("div",{className:"w-16 h-16 border-t-4 border-primary border-solid rounded-full animate-spin mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Voc\xea ser\xe1 redirecionado em instantes."})]})})}},1097:function(e,r,t){"use strict";t.d(r,{O:function(){return a}});let a=(0,t(4566).eI)("https://bxnumrwmdqlepwoiwgzw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ4bnVtcndtZHFsZXB3b2l3Z3p3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDEwOTE2MjYsImV4cCI6MjA1NjY2NzYyNn0.LOSA4H_LEXn3V0bMlpBn1RUhOLoqe84JnAe5HQ5QM0k")},4033:function(e,r,t){e.exports=t(5313)}},function(e){e.O(0,[382,971,938,744],function(){return e(e.s=3332)}),_N_E=e.O()}]);