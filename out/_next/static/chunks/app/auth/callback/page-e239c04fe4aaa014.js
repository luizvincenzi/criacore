(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{447:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>u});var s=a(5155),t=a(2115),o=a(5695),n=a(2643);function u(){let e=(0,o.useRouter)();return(0,t.useEffect)(()=>{(async()=>{let{searchParams:r}=new URL(window.location.href),a=r.get("code"),s=r.get("user_type");if(a)try{let{data:r,error:u}=await n.N.auth.exchangeCodeForSession(a);if(u){console.error("Error exchanging code for session:",u),e.push("/auth/login?error=auth_callback_error");return}if(r.user&&r.user.app_metadata.provider&&!r.user.app_metadata.profile_created){var t,o;let a=s||"creator";if("brand"===a){let{error:e}=await n.N.from("brands").insert([{id:r.user.id,name:r.user.user_metadata.full_name||(null===(t=r.user.email)||void 0===t?void 0:t.split("@")[0]),email:r.user.email}]);e&&console.error("Error creating brand profile:",e)}else{let{error:e}=await n.N.from("creators").insert([{id:r.user.id,name:r.user.user_metadata.full_name||(null===(o=r.user.email)||void 0===o?void 0:o.split("@")[0]),email:r.user.email}]);e&&console.error("Error creating creator profile:",e)}await n.N.auth.updateUser({data:{profile_created:!0,user_type:a}}),e.push("/auth/onboarding?type=".concat(a))}else e.push("/dashboard")}catch(r){console.error("Unexpected error during auth callback:",r),e.push("/auth/login?error=unexpected_error")}else e.push("/auth/login?error=no_code_error")})()},[e]),(0,s.jsx)("div",{className:"min-h-screen bg-background flex flex-col justify-center items-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Processando seu login..."}),(0,s.jsx)("div",{className:"w-16 h-16 border-t-4 border-primary border-solid rounded-full animate-spin mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Voc\xea ser\xe1 redirecionado em instantes."})]})})}},1456:(e,r,a)=>{Promise.resolve().then(a.bind(a,447))},2643:(e,r,a)=>{"use strict";a.d(r,{N:()=>s});let s=(0,a(6302).UU)("https://example.supabase.co","example-anon-key")},5695:(e,r,a)=>{"use strict";var s=a(8999);a.o(s,"usePathname")&&a.d(r,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(r,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(r,{useSearchParams:function(){return s.useSearchParams}})}},e=>{var r=r=>e(e.s=r);e.O(0,[302,441,684,358],()=>r(1456)),_N_E=e.O()}]);