(()=>{var e={};e.id=305,e.ids=[305],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},6602:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>l});var t=a(482),s=a(9108),i=a(2563),n=a.n(i),o=a(8300),c={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);a.d(r,c);let l=["",{children:["dashboard",{children:["campaigns",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,5362)),"/Users/luizgustavovincenzi/ai-projects/CriaCore/criacore-1/src/app/dashboard/campaigns/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,4699)),"/Users/luizgustavovincenzi/ai-projects/CriaCore/criacore-1/src/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,2137)),"/Users/luizgustavovincenzi/ai-projects/CriaCore/criacore-1/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,8206)),"/Users/luizgustavovincenzi/ai-projects/CriaCore/criacore-1/src/app/not-found.tsx"]}],d=["/Users/luizgustavovincenzi/ai-projects/CriaCore/criacore-1/src/app/dashboard/campaigns/page.tsx"],m="/dashboard/campaigns/page",p={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/dashboard/campaigns/page",pathname:"/dashboard/campaigns",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},3938:(e,r,a)=>{Promise.resolve().then(a.bind(a,304))},304:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>d});var t=a(2295),s=a(3729),i=a(2254),n=a(783),o=a.n(n),c=a(6257);function l({campaign:e,userType:r,onJoin:a}){let[i,n]=(0,s.useState)(!1),c=e=>{let r=new Date(e);return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(r)},l=()=>!!e.participations&&0!==e.participations.length&&e.participations.some(e=>"rejected"!==e.status),d=async()=>{if(a)try{n(!0),await a(e.id)}catch(e){console.error("Erro ao participar da campanha:",e)}finally{n(!1)}},m=(()=>{let r=new Date(e.end_date),a=new Date;return Math.ceil((r.getTime()-a.getTime())/864e5)})();return(0,t.jsxs)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:[(0,t.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 truncate",children:e.title}),"creator"===r&&e.brands&&t.jsx("p",{className:"text-sm text-gray-500",children:e.brands.name})]}),t.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${(e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"draft":default:return"bg-gray-100 text-gray-800";case"completed":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800"}})(e.status)}`,children:(e=>{switch(e){case"active":return"Ativa";case"draft":return"Rascunho";case"completed":return"Conclu\xedda";case"cancelled":return"Cancelada";default:return e}})(e.status)})]}),t.jsx("p",{className:"mt-2 text-sm text-gray-500 line-clamp-2",children:e.description}),(0,t.jsxs)("div",{className:"mt-4 flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("svg",{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})}),(0,t.jsxs)("span",{className:"text-gray-500",children:[c(e.start_date)," - ",c(e.end_date)]})]}),m>0&&"active"===e.status&&(0,t.jsxs)("span",{className:"text-primary font-medium",children:[m," ",1===m?"dia":"dias"," restantes"]})]}),e.budget&&"creator"===r&&(0,t.jsxs)("div",{className:"mt-2 flex items-center text-sm",children:[t.jsx("svg",{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.736 6.979C9.208 6.193 9.696 6 10 6c.304 0 .792.193 1.264.979a1 1 0 001.715-1.029C12.279 4.784 11.232 4 10 4s-2.279.784-2.979 1.95c-.285.475-.507 1-.67 1.55H6a1 1 0 000 2h.013a9.358 9.358 0 000 1H6a1 1 0 100 2h.351c.163.55.385 1.075.67 1.55C7.721 15.216 8.768 16 10 16s2.279-.784 2.979-1.95a1 1 0 10-1.715-1.029c-.472.786-.96.979-1.264.979-.304 0-.792-.193-1.264-.979a4.265 4.265 0 01-.264-.521H10a1 1 0 100-2H8.017a7.36 7.36 0 010-1H10a1 1 0 100-2H8.472c.08-.185.167-.36.264-.521z",clipRule:"evenodd"})}),(0,t.jsxs)("span",{className:"text-gray-500",children:["Or\xe7amento: R$ ",e.budget.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 px-4 py-4 sm:px-6 flex justify-between items-center",children:[t.jsx(o(),{href:`/dashboard/${"brand"===r?"campaigns":"opportunities"}/${e.id}`,className:"text-sm font-medium text-primary hover:text-primary-dark",children:"Ver detalhes"}),"creator"===r&&"active"===e.status&&!l()&&t.jsx("button",{type:"button",onClick:d,disabled:i,className:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:i?"Participando...":"Participar"}),"creator"===r&&l()&&t.jsx("span",{className:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-primary bg-primary-light bg-opacity-20",children:"Participando"})]})]})}function d(){let e=(0,i.useRouter)(),{user:r}=(0,c.useSupabase)(),[a,n]=(0,s.useState)(null),[d,m]=(0,s.useState)([]),[p,u]=(0,s.useState)(!0),[x,g]=(0,s.useState)(null),[h,f]=(0,s.useState)(1),[b,y]=(0,s.useState)(1),[v,j]=(0,s.useState)(null);(0,s.useEffect)(()=>{if(!r){e.push("/auth/login");return}(async()=>{try{let e=r.user_metadata?.user_type||null;n(e),w(e,1)}catch(e){console.error("Error fetching user data:",e),g("Erro ao carregar dados do usu\xe1rio"),u(!1)}})()},[r,e]);let w=async(e,r,a=null)=>{try{u(!0),g(null);let e=new URLSearchParams;e.append("page",r.toString()),e.append("limit","9"),a&&e.append("status",a);let t=await fetch(`/api/campaigns?${e.toString()}`),s=await t.json();if(!t.ok)throw Error(s.error||"Erro ao carregar campanhas");m(s.campaigns||[]),y(s.pagination?.pages||1),f(r)}catch(e){console.error("Error fetching campaigns:",e),g(e.message||"Erro ao carregar campanhas")}finally{u(!1)}},N=e=>{w(a,e,v)},C=e=>{j(e),w(a,1,e)},P=async e=>{try{let r=await fetch("/api/participations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({campaign_id:e})}),t=await r.json();if(!r.ok)throw Error(t.error||"Erro ao participar da campanha");w(a,h,v)}catch(e){console.error("Error joining campaign:",e),alert(e.message||"Erro ao participar da campanha")}};return p&&0===d.length?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"w-16 h-16 border-t-4 border-primary border-solid rounded-full animate-spin"})}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"md:flex md:items-center md:justify-between mb-8",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[t.jsx("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate",children:"brand"===a?"Minhas Campanhas":"Oportunidades"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"brand"===a?"Gerencie suas campanhas de marketing com influenciadores":"Encontre oportunidades para colaborar com marcas"})]}),"brand"===a&&t.jsx("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:t.jsx(o(),{href:"/dashboard/campaigns/new",className:"ml-3 inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"Nova Campanha"})})]}),t.jsx("div",{className:"mb-6",children:(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[t.jsx("button",{onClick:()=>C(null),className:`px-3 py-1 rounded-full text-sm font-medium ${null===v?"bg-primary text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:"Todas"}),t.jsx("button",{onClick:()=>C("active"),className:`px-3 py-1 rounded-full text-sm font-medium ${"active"===v?"bg-primary text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:"Ativas"}),t.jsx("button",{onClick:()=>C("draft"),className:`px-3 py-1 rounded-full text-sm font-medium ${"draft"===v?"bg-primary text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:"Rascunhos"}),t.jsx("button",{onClick:()=>C("completed"),className:`px-3 py-1 rounded-full text-sm font-medium ${"completed"===v?"bg-primary text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:"Conclu\xeddas"})]})}),x&&t.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6",children:t.jsx("div",{className:"flex",children:t.jsx("div",{className:"ml-3",children:t.jsx("p",{className:"text-sm text-red-700",children:x})})})}),0===d.length?(0,t.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:v?`Nenhuma campanha ${"active"===v?"ativa":"draft"===v?"em rascunho":"conclu\xedda"} encontrada`:"Nenhuma campanha encontrada"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"brand"===a?"Comece criando sua primeira campanha para conectar-se com influenciadores":"N\xe3o h\xe1 oportunidades dispon\xedveis no momento. Volte mais tarde!"}),"brand"===a&&t.jsx(o(),{href:"/dashboard/campaigns/new",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"Criar Campanha"})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(e=>t.jsx(l,{campaign:e,userType:a||"creator",onJoin:"creator"===a?P:void 0},e.id))}),b>1&&t.jsx("div",{className:"mt-8 flex justify-center",children:(0,t.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[(0,t.jsxs)("button",{onClick:()=>N(h-1),disabled:1===h,className:`relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium ${1===h?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:bg-gray-50"}`,children:[t.jsx("span",{className:"sr-only",children:"Anterior"}),t.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:t.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),Array.from({length:b},(e,r)=>r+1).map(e=>t.jsx("button",{onClick:()=>N(e),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${h===e?"z-10 bg-primary border-primary text-white":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:e},e)),(0,t.jsxs)("button",{onClick:()=>N(h+1),disabled:h===b,className:`relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium ${h===b?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:bg-gray-50"}`,children:[t.jsx("span",{className:"sr-only",children:"Pr\xf3xima"}),t.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:t.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})})]})]})}},5362:(e,r,a)=>{"use strict";a.r(r),a.d(r,{$$typeof:()=>i,__esModule:()=>s,default:()=>n});let t=(0,a(6843).createProxy)(String.raw`/Users/luizgustavovincenzi/ai-projects/CriaCore/criacore-1/src/app/dashboard/campaigns/page.tsx`),{__esModule:s,$$typeof:i}=t,n=t.default}};var r=require("../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[225,248,323],()=>a(6602));module.exports=t})();